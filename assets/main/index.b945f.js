window.__require=function t(e,n,r){function o(c,i){if(!n[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var _="function"==typeof __require&&__require;if(!i&&_)return _(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return o(e[c][1][t]||t)},u,u.exports,t,e,n,r)}return n[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<r.length;c++)o(r[c]);return o}({extend:[function(t,e,n){"use strict";cc._RF.push(e,"edf607JXUpPAIJNKFTsp0MC","extend"),DataView.prototype.write_utf8=function(t,e){for(var n=t,r=0;r<e.length;r++){var o=e.charCodeAt(r);o<128?(this.setUint8(n,o),n++):o<2048?(this.setUint8(n,192|o>>6),n++,this.setUint8(n,128|63&o),n++):o<55296||o>=57344?(this.setUint8(n,224|o>>12),n++,this.setUint8(n,128|o>>6&63),n++,this.setUint8(n,128|63&o),n++):(r++,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),this.setUint8(n,240|o>>18),n++,this.setUint8(n,128|o>>12&63),n++,this.setUint8(n,128|o>>6&63),n++,this.setUint8(n,128|63&o),n++)}},DataView.prototype.read_utf8=function(t,e){var n,r,o,s,c,i;for(n="",o=t+e,r=t;r<o;)switch(s=this.getUint8(r),r++,s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:n+=String.fromCharCode(s);break;case 12:case 13:c=array[r++],n+=String.fromCharCode((31&s)<<6|63&c);break;case 14:c=this.getUint8(r),r++,i=this.getUint8(r),r++,n+=String.fromCharCode((15&s)<<12|(63&c)<<6|(63&i)<<0)}return n},String.prototype.utf8_byte_len=function(){var t,e,n=0;for(t=0;t<this.length;t++)(e=this.charCodeAt(t))<127?n+=1:128<=e&&e<=2047?n+=2:2048<=e&&e<=65535&&(n+=3);return n},cc._RF.pop()},{}],home_scene:[function(t,e,n){"use strict";cc._RF.push(e,"c77ff9NcdxPja0oO9BV3wGO","home_scene"),cc.Class({extends:cc.Component,properties:{tab_buttons:{default:[],type:cc.Button},tab_content:{default:[],type:cc.Node}},onLoad:function(){this.tab_button_com_set=[];for(var t=0;t<this.tab_buttons.length;t++){var e=this.tab_buttons[t].getComponent("tab_button");this.tab_button_com_set.push(e)}},start:function(){this.on_tab_button_click(null,"0")},disable_tab:function(t){this.tab_button_com_set[t].set_actived(!1),this.tab_buttons[t].interactable=!0,this.tab_content[t].active=!1},enable_tab:function(t){this.tab_button_com_set[t].set_actived(!0),this.tab_buttons[t].interactable=!1,this.tab_content[t].active=!0},on_tab_button_click:function(t,e){e=parseInt(e);for(var n=0;n<this.tab_buttons.length;n++)n==e?this.enable_tab(n):this.disable_tab(n)}}),cc._RF.pop()},{}],http:[function(t,e,n){"use strict";cc._RF.push(e,"ab6a0JgUItNbYTxGZv3swHY","http");var r={get:function(t,e,n,r){var o=cc.loader.getXMLHttpRequest();o.timeout=5e3;var s=t+e;return n&&(s=s+"?"+n),o.open("GET",s,!0),cc.sys.isNative&&o.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),o.onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<300){console.log("http res("+o.responseText.length+"):"+o.responseText);try{var t=o.responseText;return void(null!==r&&r(null,t))}catch(t){r(t,null)}}else r(o.readyState+":"+o.status,null)},o.send(),o},post:function(t,e,n,r,o){var s=cc.loader.getXMLHttpRequest();s.timeout=5e3;var c=t+e;return n&&(c=c+"?"+n),s.open("POST",c,!0),cc.sys.isNative&&s.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),r&&(s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("Content-Length",r.length)),s.onreadystatechange=function(){if(4===s.readyState&&s.status>=200&&s.status<300)try{var t=s.responseText;return void(null!==o&&o(null,t))}catch(t){o(t,null)}else o(s.readyState+":"+s.status,null)},r&&s.send(r),s},download:function(t,e,n,r){var o=cc.loader.getXMLHttpRequest();o.timeout=5e3;var s=t+e;return n&&(s=s+"?"+n),o.responseType="arraybuffer",o.open("GET",s,!0),cc.sys.isNative&&o.setRequestHeader("Accept-Encoding","gzip,deflate","text/html;charset=UTF-8"),o.onreadystatechange=function(){if(4===o.readyState&&o.status>=200&&o.status<300){for(var t=o.response,e=new DataView(t),n=new Uint8Array(t.byteLength),s=0;s<n.length;s++)n[s]=e.getUint8(s);r(null,n)}else r(o.readyState+":"+o.status,null)},o.send(),o}};e.exports=r,cc._RF.pop()},{}],loading:[function(t,e,n){"use strict";cc._RF.push(e,"5024e6OFatCpZsnhtjbi3Yf","loading");t("websocket");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.scheduleOnce(function(){cc.director.loadScene("home_scene")}.bind(this),2)}}),cc._RF.pop()},{websocket:"websocket"}],proto_man:[function(t,e,n){"use strict";cc._RF.push(e,"f55c2zFzBZH7oyvoc0Mo9lP","proto_man");var r=t("proto_tools"),o={info:console.log,warn:console.log,error:console.log},s={PROTO_JSON:1,PROTO_BUF:2,encode_cmd:function(t,e,n,o){var i,_=null;if(t==s.PROTO_JSON)i=a(e,n,o);else{var d=u(e,n);if(!l[d])return null;i=l[d](e,n,o)}r.write_prototype_inbuf(i,t),(_=i.buffer)&&(_=c(_));return _},decode_cmd:function(t,e){e=i(e);var n=new DataView(e);if(n.byteLength<r.header_size)return null;if(t==s.PROTO_JSON)return _(n);var o=r.read_int16(n,0),c=r.read_int16(n,2),a=u(o,c);if(!d[a])return null;return d[a](n)},reg_decoder:function(t,e,n){var r=u(t,e);d[r]&&o.warn("stype: "+t+" ctype: "+e+"is reged!!!");d[r]=n},reg_encoder:function(t,e,n){var r=u(t,e);l[r]&&o.warn("stype: "+t+" ctype: "+e+"is reged!!!");l[r]=n}};function c(t){return t}function i(t){return t}function a(t,e,n){var o={};o[0]=n;var s=JSON.stringify(o);return r.encode_str_cmd(t,e,s)}function _(t){var e=r.decode_str_cmd(t),n=e[2];try{var o=JSON.parse(n);e[2]=o[0]}catch(t){return null}return e&&void 0!==e[0]&&void 0!==e[1]&&void 0!==e[2]?e:null}function u(t,e){return 65536*t+e}var d={},l={};e.exports=s,cc._RF.pop()},{proto_tools:"proto_tools"}],proto_tools:[function(t,e,n){"use strict";var r;function o(t,e){return t.getInt16(e,!0)}function s(t,e,n){t.setInt16(e,n,!0)}function c(t,e,n){t.setInt32(e,n,!0)}function i(t,e,n){t.setUint32(e,n,!0)}function a(t,e,n){return t.read_utf8(e,n)}function _(t,e,n){t.write_utf8(e,n)}function u(t){var e=new ArrayBuffer(t);return new DataView(e)}function d(t,e,n){return s(t,0,e),s(t,2,n),i(t,4,0),f.header_size}function l(t,e,n,r){return s(t,e,r),_(t,e+=2,n),e+=r}function h(t,e){var n=o(t,e);return[a(t,e+=2,n),e+=n]}cc._RF.push(e,"f36ebN4n4VMFZAqKqZLiVEq","proto_tools");var f=((r={header_size:10,read_int8:function(t,e){return t.getInt8(e)},write_int8:function(t,e,n){t.setInt8(e,n)},read_int16:o,write_int16:s}).write_int16=s,r.read_int32=function(t,e){return t.getInt32(e,!0)},r.write_int32=c,r.write_int32=c,r.read_uint32=function(t,e){return t.getUint32(e,!0)},r.write_uint32=i,r.read_float=function(t,e){return t.getFloat32(e,!0)},r.write_float=function(t,e,n){t.setFloat32(e,n,!0)},r.alloc_buffer=u,r.write_cmd_header_inbuf=d,r.write_prototype_inbuf=function(t,e){s(t,8,e)},r.write_str_inbuf=l,r.read_str_inbuf=h,r.encode_str_cmd=function(t,e,n){var r=n.utf8_byte_len(),o=u(f.header_size+2+r),s=d(o,t,e);return s=l(o,s,n,r),o},r.encode_status_cmd=function(t,e,n){var r=u(f.header_size+2);return d(r,t,e),s(r,f.header_size,n),r},r.encode_empty_cmd=function(t,e,n){var r=u(f.header_size);return d(r,t,e),r},r.decode_str_cmd=function(t){var e={};e[0]=o(t,0),e[1]=o(t,2);var n=h(t,f.header_size);return e[2]=n[0],e},r.decode_status_cmd=function(t){var e={};return e[0]=o(t,0),e[1]=o(t,2),e[2]=o(t,f.header_size),e},r.decode_empty_cmd=function(t){var e={};return e[0]=o(t,0),e[1]=o(t,2),e[2]=null,e},r);e.exports=f,cc._RF.pop()},{}],tab_button:[function(t,e,n){"use strict";cc._RF.push(e,"501d4t06+tIMLErcLfUY2FK","tab_button"),cc.Class({extends:cc.Component,properties:{icon_normal:{default:null,type:cc.SpriteFrame},icon_selected:{default:null,type:cc.SpriteFrame}},onLoad:function(){this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite),this.label=this.node.getChildByName("name"),this.is_active=!1},set_actived:function(t){this.is_active=t,this.is_active?(this.icon.spriteFrame=this.icon_selected,this.label.color=new cc.Color(255,253,200,255)):(this.icon.spriteFrame=this.icon_normal,this.label.color=new cc.Color(118,118,118,255))},start:function(){}}),cc._RF.pop()},{}],talk_room_proto:[function(t,e,n){"use strict";cc._RF.push(e,"2f0ebNsZRNO0r2YVNzvBUXM","talk_room_proto");var r=t("proto_man"),o=t("proto_tools"),s={OK:1,IS_IN_TALKROOM:-100,NOT_IN_TALKROOM:-101,INVALD_OPT:-102,INVALID_PARAMS:-103};r.reg_decoder(1,3,function(t){var e={};e[0]=o.read_int16(t,0),e[1]=o.read_int16(t,2);var n=o.header_size,r={};e[2]=r;var s=o.read_str_inbuf(t,n);return r.uname=s[0],n=s[1],r.usex=o.read_int16(t,n),n+=2,e}),r.reg_decoder(1,4,function(t){var e={};e[0]=o.read_int16(t,0),e[1]=o.read_int16(t,2);var n=o.header_size,r={};e[2]=r;var s=o.read_str_inbuf(t,n);return r.uname=s[0],n=s[1],r.usex=o.read_int16(t,n),n+=2,e}),r.reg_encoder(1,1,function(t,e,n){var r=n.uname.utf8_byte_len(),s=o.header_size+2+r+2,c=o.alloc_buffer(s),i=o.write_cmd_header_inbuf(c,t,e);return i=o.write_str_inbuf(c,i,n.uname,r),o.write_int16(c,i,n.usex),c}),r.reg_decoder(1,1,o.decode_status_cmd),r.reg_encoder(1,2,o.encode_empty_cmd),r.reg_decoder(1,2,o.decode_status_cmd),r.reg_encoder(1,5,o.encode_str_cmd),r.reg_decoder(1,5,function(t){var e={};e[0]=o.read_int16(t,0),e[1]=o.read_int16(t,2);var n=o.header_size,r={},c=o.read_int16(t,n);if(n+=2,r[0]=c,e[2]=r,c!=s.OK)return e;var i=o.read_str_inbuf(t,n);return r[1]=i[0],n=i[1],r[2]=o.read_int16(t,n),n+=2,i=o.read_str_inbuf(t,n),r[3]=i[0],e}),r.reg_decoder(1,6,function(t){var e={};e[0]=o.read_int16(t,0),e[1]=o.read_int16(t,2);var n=o.header_size,r={};e[2]=r;var s=o.read_str_inbuf(t,n);return r[0]=s[0],n=s[1],r[1]=o.read_int16(t,n),n+=2,s=o.read_str_inbuf(t,n),r[2]=s[0],e}),e.exports={stype:1,cmd:{Enter:1,Exit:2,UserArrived:3,UserExit:4,SendMsg:5,UserMsg:6},respones:s},cc._RF.pop()},{proto_man:"proto_man",proto_tools:"proto_tools"}],talkroom:[function(t,e,n){"use strict";cc._RF.push(e,"a66d9GYXsVFG7sbCM18Qn6G","talkroom");var r=t("websocket"),o=t("utils"),s=1,c=2,i=3,a=4,_=5,u=6,d=1;cc.Class({extends:cc.Component,properties:{input:{default:null,type:cc.EditBox},scroll_content:{default:null,type:cc.ScrollView},desic_prefab:{default:null,type:cc.Prefab},selftalk_prefab:{default:null,type:cc.Prefab},othertalk_prefab:{default:null,type:cc.Prefab}},onLoad:function(){r.register_serivces_handler({1:this.on_talk_room_service_return.bind(this)}),this.random_uname="\u6e38\u5ba2"+o.random_int_str(4),this.random_sex=o.random_int(1,2)},show_tip_msg:function(t){var e=cc.instantiate(this.desic_prefab);e.getChildByName("desic").getComponent(cc.Label).string=t,this.scroll_content.content.addChild(e),this.scroll_content.scrollToBottom(.1)},show_self_talk:function(t,e){var n=cc.instantiate(this.selftalk_prefab),r=n.getChildByName("uname").getComponent(cc.Label);r.string=t,(r=n.getChildByName("msg").getComponent(cc.Label)).string=e,this.scroll_content.content.addChild(n),this.scroll_content.scrollToBottom(.1)},show_other_talk:function(t,e){var n=cc.instantiate(this.othertalk_prefab),r=n.getChildByName("uname").getComponent(cc.Label);r.string=t,(r=n.getChildByName("msg").getComponent(cc.Label)).string=e,this.scroll_content.content.addChild(n),this.scroll_content.scrollToBottom(.1)},on_talk_room_service_return:function(t,e,n){switch(e){case s:n==d&&this.show_tip_msg("\u4f60\u5df2\u7ecf\u6210\u529f\u8fdb\u5165\u804a\u5929\u5ba4");break;case c:n==d&&this.show_tip_msg("\u4f60\u5df2\u7ecf\u79bb\u5f00\u804a\u5929\u5ba4");break;case i:this.show_tip_msg(n.uname+"\u8fdb\u5165\u804a\u5929\u5ba4");break;case a:this.show_tip_msg(n.uname+"\u79bb\u5f00\u804a\u5929\u5ba4");break;case _:n[0]==d&&this.show_self_talk(n[1],n[3]);break;case u:this.show_other_talk(n[0],n[2])}},start:function(){},connect_to_talkroom:function(){console.log("connect_to_talkroom"),r.send_cmd(1,s,{uname:this.random_uname,usex:this.random_sex})},disconnect_from_talkroom:function(){console.log("disconnect_from_talkroom"),r.send_cmd(1,c,null)},send_msg_to_talkroom:function(){var t=this.input.string;!t||t.length<=0||(console.log(t),r.send_cmd(1,_,t),this.input.string="")}}),cc._RF.pop()},{utils:"utils",websocket:"websocket"}],"use_v2.0.x_cc.Toggle_event":[function(t,e,n){"use strict";cc._RF.push(e,"2f5cbwv94JM77qjVnhK2jZM","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}],utils:[function(t,e,n){"use strict";cc._RF.push(e,"0dca1e2X45OgpEGMM1URiES","utils");var r={random_string:function(t){for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,r="",o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*n));return r},random_int_str:function(t){for(var e="0123456789".length,n="",r=0;r<t;r++)n+="0123456789".charAt(Math.floor(Math.random()*e));return n},random_int:function(t,e){var n=t+Math.random()*(e-t+1);return(n=Math.floor(n))>e&&(n=e),n}};e.exports=r,cc._RF.pop()},{}],websocket:[function(t,e,n){"use strict";cc._RF.push(e,"696382X9vhGr66RtiwqPMr8","websocket");var r=t("proto_man"),o={sock:null,serivces_handler:null,proto_type:0,is_connected:!1,_on_opened:function(t){console.log("ws connect server success"),this.is_connected=!0},_on_recv_data:function(t){var e=t.data;if(this.serivces_handler){var n=r.decode_cmd(this.proto_type,e);if(n){var o=n[0];this.serivces_handler[o]&&this.serivces_handler[o](n[0],n[1],n[2])}}},_on_socket_close:function(t){this.sock&&this.close()},_on_socket_err:function(t){this.close()},connect:function(t,e){this.sock=new WebSocket(t),this.sock.binaryType="arraybuffer",this.sock.onopen=this._on_opened.bind(this),this.sock.onmessage=this._on_recv_data.bind(this),this.sock.onclose=this._on_socket_close.bind(this),this.sock.onerror=this._on_socket_err.bind(this),this.proto_type=e},send_cmd:function(t,e,n){if(this.sock&&this.is_connected){var o=r.encode_cmd(this.proto_type,t,e,n);this.sock.send(o)}},close:function(){this.is_connected=!1,null!==this.sock&&(this.sock.close(),this.sock=null)},register_serivces_handler:function(t){this.serivces_handler=t}};o.connect("ws://127.0.0.1:6081/ws",r.PROTO_BUF),e.exports=o,cc._RF.pop()},{proto_man:"proto_man"}]},{},["use_v2.0.x_cc.Toggle_event","extend","home_scene","tab_button","loading","talk_room_proto","talkroom","http","proto_man","proto_tools","websocket","utils"]);